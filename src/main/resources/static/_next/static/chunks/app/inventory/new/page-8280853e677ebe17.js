(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{722:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(3464),s=r(9323),n=r(1487);let o=a.A.create({baseURL:"http://localhost:8080/v1/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=(0,s.gf)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),o.interceptors.response.use(e=>e,e=>{var t,r;let a=null==(t=e.config.url)?void 0:t.endsWith("/login");if((null==(r=e.response)?void 0:r.status)===401&&!a){let{clearAuth:e}=n.C.getState();e(),window.location.href="/login"}return Promise.reject(e)});let l=o},1487:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var a=r(5453),s=r(6786);let n=(0,a.v)((0,s.Zr)(e=>({authName:null,token:null,setAuthName:t=>e({authName:t}),setToken:t=>e({token:t}),clearAuth:()=>e({authName:null,token:null})}),{name:"auth-storage",partialize:e=>({authName:e.authName,token:e.token})}))},2596:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5155);function s(){return(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[#0d113d] opacity-70 z-50",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin w-16 h-16",viewBox:"0 0 50 50",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"spinner-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#3D00B8"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#3070C3"})]})}),(0,a.jsx)("circle",{cx:"25",cy:"25",r:"20",stroke:"url(#spinner-gradient)",strokeWidth:"6",fill:"none",strokeLinecap:"round"})]}),(0,a.jsx)("span",{className:"mt-4 text-lg font-semibold text-white drop-shadow",children:"ローディング中..."})]})})}},3793:(e,t,r)=>{Promise.resolve().then(r.bind(r,3935))},3935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(2115),n=r(5695),o=r(722),l=r(2596),c=r(6918);let i=["コネクタ","端子","チップジャック","プラグ","IC","フォトカプラ","コンデンサ","抵抗器","電圧計","コンバータ","レギュレータ","クリップ","LEDブラケット","DCジャック","カラーセンサ","ヒューズ","トランジスタ","ダイオード","圧電ブザー","シグナルフィルタ","位置センサー","ディストリビューター","マウントベース","ネジ・ナット類","リレー","電源","SPC ボタン","ガイドピンチップ","ボタン","セーフ","スペーサ","スイッチ","IECフィルタ","ACコード","モジュラープラグ","プラグブーツ","マーカーバンド","ソレノイド","トランジスタアレイ","ロジック","ポテンショメータ","インキ","カウンタ","ソケット","変圧器","バッファ","オプトカプラ","コンパレータ","LED","ドライバ","モジュール","アイソレータ","トランシーバ","抵抗アレイ","治具","タイマウント","フェライトコア","工具","プローブ用ソケット","NCC","スプリング","サーキットプロテクタ","ラインフィルター","発信器"];function d(){let e=(0,n.useRouter)(),t=(0,c.z)();(0,s.useEffect)(()=>{t||e.push("/login")},[t,e]);let[r,d]=(0,s.useState)({itemName:"",category:"",modelNumber:"",manufacturer:"",currentStock:0,location:"",remarks:""}),[u,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),x=e=>{let{name:t,value:r}=e.target;d(e=>({...e,[t]:"currentStock"===t?parseInt(r)||0:r}))},b=async e=>{if(!window.confirm("本当にこの内容で入庫しますか？\n品名：".concat(r.itemName,"\nカテゴリー：").concat(null==r?void 0:r.category,"\n仕入先: ").concat(r.modelNumber||"未入力","\n↓\n数量: ").concat(r.currentStock,"\n備考: ").concat(r.location||"なし","\n備考: ").concat(r.remarks||"なし")))return void window.confirm("処理を取り消しました");e.preventDefault(),p(!0);try{let e={itemName:r.itemName,category:r.category,modelNumber:r.modelNumber||"-",manufacturer:r.manufacturer||"-",currentStock:r.currentStock||0,location:r.location||"-",remarks:r.remarks||"-"},t=await o.A.post("/inventory/new",e);console.log(t.data),m(t.data)}catch(e){if(console.error(e),e.response&&e.response.data){let t=e.response.data;alert("エラーが発生しました！以下の内容を管理者に伝えてください。\n・error: ".concat(t.error,"\n・massage: ").concat(t.message,"\n・status: ").concat(t.status))}}finally{p(!1)}};return(0,a.jsxs)(a.Fragment,{children:[h&&(0,a.jsx)(l.A,{}),(0,a.jsxs)("div",{className:"max-w-xl mx-auto bg-white border-gray-400 shadow p-5",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"新規在庫登録"}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"itemName",className:"block mb-1 font-medium",children:"品名 *"}),(0,a.jsx)("input",{type:"text",name:"itemName",value:r.itemName,onChange:x,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block mb-1 font-medium",children:"カテゴリ *"}),(0,a.jsxs)("select",{name:"category",id:"category",value:r.category,onChange:x,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2",children:[(0,a.jsx)("option",{value:"",children:"-- カテゴリを選択してください --"})," ",i.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"modelNumber",className:"block mb-1 font-medium",children:"型番"}),(0,a.jsx)("input",{type:"text",name:"modelNumber",value:r.modelNumber,onChange:x,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"manufacturer",className:"block mb-1 font-medium",children:"メーカー"}),(0,a.jsx)("input",{type:"text",name:"manufacturer",value:r.manufacturer,onChange:x,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"currentStock",className:"block mb-1 font-medium",children:["在庫数 * ",(0,a.jsx)("span",{className:"text-sm",children:"(ID発行のみなら、0でOK)"})]}),(0,a.jsx)("input",{type:"number",name:"currentStock",value:r.currentStock,min:0,onChange:x,required:!0,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"location",className:"block mb-1 font-medium",children:"保管先"}),(0,a.jsx)("input",{type:"text",name:"location",value:r.location,onChange:x,className:"w-full border border-gray-300 rounded px-3 py-2",placeholder:"例: 棚 上から3段目の左側の箱"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"remarks",className:"block mb-1 font-medium",children:"備考"}),(0,a.jsx)("textarea",{name:"remarks",value:r.remarks,onChange:x,className:"w-full border border-gray-300 rounded px-3 py-2"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/inventory"),className:"px-4 py-2 border rounded bg-gray-100 hover:bg-gray-200",children:"キャンセル"}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 border rounded  text-white hover:opacity-80 disabled:opacity-50",style:{background:"linear-gradient(to bottom, #3D00B8, #3070C3)"},children:h?"登録中...":"在庫を登録する"})]})]})]}),u&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:(0,a.jsxs)("p",{className:"bg-white shadoow p-5 rounded",children:[(0,a.jsx)("p",{children:"登録に成功しました。"}),(0,a.jsxs)("p",{className:"mb-5",children:["在庫ID: ",u.data.itemCode]}),(0,a.jsx)("button",{className:"px-4 py-1 rounded bg-blue-600 text-white mr-2",onClick:()=>{m(null),d({itemName:"",category:"",modelNumber:"",manufacturer:"",currentStock:0,location:"-",remarks:"-"})},children:"続けて登録"}),(0,a.jsx)("button",{className:"px-4 py-1 rounded bg-blue-600 text-white",onClick:()=>e.push("/inventory"),children:"在庫検索に戻る"})]})})]})}},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6918:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var a=r(2115),s=r(5695),n=r(1487);let o=()=>{var e;let t=(0,s.useRouter)(),r=(0,n.C)(e=>e.token),o=(0,n.C)(e=>e.authName),l=null!=(e=n.C.persist)&&!!e.hasHydrated&&n.C.persist.hasHydrated(),c=!!r&&!!o;return(0,a.useEffect)(()=>{l&&(c||t.replace("/login"))},[c,l,t]),l&&c}},9323:(e,t,r)=>{"use strict";r.d(t,{EN:()=>n,gf:()=>l,ri:()=>o});var a=r(1487),s=r(722);let n=async(e,t)=>{let r=await s.A.post("/login",{username:e,password:t});console.log("axios response:",r);let n=r.data.data.token,o=r.data.data.username;if(!n)throw Error("トークンが取得できませんでした");a.C.getState().setToken(n),a.C.getState().setAuthName(o)},o=()=>{a.C.getState().clearAuth()},l=()=>a.C.getState().token||localStorage.getItem("authToken")}},e=>{var t=t=>e(e.s=t);e.O(0,[655,441,684,358],()=>t(3793)),_N_E=e.O()}]);