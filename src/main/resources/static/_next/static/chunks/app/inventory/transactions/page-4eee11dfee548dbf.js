(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{321:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(5155),r=s(9946);let n=(0,r.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),l=(0,r.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function i(e){let{currentPage:t,totalPages:s,onPageChange:r}=e;return s<=1?null:(0,a.jsxs)("div",{className:"flex justify-center items-center mt-6 gap-2",children:[(0,a.jsx)("button",{onClick:()=>r(t-1),disabled:0===t,className:"disabled:text-gray-400",children:(0,a.jsx)(n,{})}),[...Array(s)].map((e,s)=>(0,a.jsx)("button",{onClick:()=>r(s),disabled:s===t,className:"px-3 py-1 rounded ".concat(s===t?"text-gray-400":"hover:bg-gray-300"),children:s+1},s)),(0,a.jsx)("button",{onClick:()=>r(t+1),disabled:t===s-1,className:"disabled:text-gray-400",children:(0,a.jsx)(l,{})})]})}},722:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(3464),r=s(9323),n=s(1487);let l=a.A.create({baseURL:"http://localhost:8080/v1/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=(0,r.gf)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),l.interceptors.response.use(e=>e,e=>{var t,s;let a=null==(t=e.config.url)?void 0:t.endsWith("/login");if((null==(s=e.response)?void 0:s.status)===401&&!a){let{clearAuth:e}=n.C.getState();e(),window.location.href="/login"}return Promise.reject(e)});let i=l},1487:(e,t,s)=>{"use strict";s.d(t,{C:()=>n});var a=s(5453),r=s(6786);let n=(0,a.v)((0,r.Zr)(e=>({authName:null,token:null,setAuthName:t=>e({authName:t}),setToken:t=>e({token:t}),clearAuth:()=>e({authName:null,token:null})}),{name:"auth-storage",partialize:e=>({authName:e.authName,token:e.token})}))},2596:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(5155);function r(){return(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[#0d113d] opacity-70 z-50",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin w-16 h-16",viewBox:"0 0 50 50",children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"spinner-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#3D00B8"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#3070C3"})]})}),(0,a.jsx)("circle",{cx:"25",cy:"25",r:"20",stroke:"url(#spinner-gradient)",strokeWidth:"6",fill:"none",strokeLinecap:"round"})]}),(0,a.jsx)("span",{className:"mt-4 text-lg font-semibold text-white drop-shadow",children:"ローディング中..."})]})})}},3786:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6918:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var a=s(2115),r=s(5695),n=s(1487);let l=()=>{var e;let t=(0,r.useRouter)(),s=(0,n.C)(e=>e.token),l=(0,n.C)(e=>e.authName),i=null!=(e=n.C.persist)&&!!e.hasHydrated&&n.C.persist.hasHydrated(),c=!!s&&!!l;return(0,a.useEffect)(()=>{i&&(c||t.replace("/login"))},[c,i,t]),i&&c}},7039:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("package-plus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]])},7924:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8016:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(5155),r=s(2115),n=s(722),l=s(7039);let i=(0,s(9946).A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var c=s(9799),o=s(3786),d=s(8804),x=s(4416);function h(e){var t;let{transaction:s,onClose:r}=e,n=s.stockItem,l=s.purchaseOrder;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[#0d113d] opacity-40",onClick:r}),(0,a.jsxs)("div",{className:"relative z-10 bg-white w-full max-w-xl max-h-[70vh] py-10 px-6 rounded-lg shadow-lg overflow-y-auto space-y-4",children:[(0,a.jsx)("button",{onClick:r,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:(0,a.jsx)(x.A,{size:24})}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:n.itemName}),(0,a.jsx)("h3",{className:"font-semibold",children:n.itemCode}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["カテゴリ / 型番 ",(0,a.jsx)("br",{}),n.category," / ",n.modelNumber]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:["処理種別:","ORDER_REGIST"===s.transactionType?"発注登録":"MANUAL_DISPATCH"===s.transactionType?"出庫":"ITEM_REGIST"===s.transactionType?"在庫登録":"入庫"]}),(0,a.jsxs)("p",{children:["数量:","MANUAL_DISPATCH"===s.transactionType?"-".concat(s.quantity):"ORDER_REGIST"===s.transactionType||"ITEM_REGIST"===s.transactionType?"(".concat(s.quantity,")"):"+".concat(s.quantity)]}),(0,a.jsxs)("p",{children:["実行者: ",s.operator]}),(0,a.jsxs)("p",{children:["実行日: ",s.transactionTime.slice(0,10)]}),(0,a.jsxs)("p",{children:["備考: ",s.remarks||"-"]})]}),["PURCHASE_RECEIVE","ORDER_REGIST"].includes(s.transactionType)&&l&&(0,a.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"発注情報"}),(0,a.jsxs)("p",{children:["発注番号: ",l.orderNo]}),(0,a.jsxs)("p",{children:["発注日: ",l.orderDate]}),(0,a.jsxs)("p",{children:["仕入先: ",l.supplier]}),(0,a.jsxs)("p",{children:["送料: ￥",l.shippingFee]}),(0,a.jsxs)("p",{children:["備考: ",l.remarks||"-"]}),(0,a.jsx)("p",{className:"font-medium mt-2",children:"明細:"}),(0,a.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-700",children:null==(t=l.details)?void 0:t.map((e,t)=>(0,a.jsxs)("li",{children:[e.itemCode," - ",e.itemName,"（￥",e.purchasePrice," \xd7 ",e.quantity,"）"]},t))})]})]})]})}var u=s(6874),p=s.n(u);function m(e){let{data:t}=e,[s,n]=(0,r.useState)(null);return(0,a.jsxs)("div",{className:"overflow-x-auto bg-white",children:[(0,a.jsxs)("table",{className:"w-full text-sm text-center border-collapse",children:[(0,a.jsx)("thead",{style:{color:"#101540"},children:(0,a.jsxs)("tr",{className:"font-semibold",children:[(0,a.jsx)("th",{className:"px-4 py-2",children:"種別"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"実行日"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"ID"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"品名"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"数量"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"実行者"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"備考"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"詳細"})]})}),(0,a.jsx)("tbody",{className:"text-gray-700",children:t.map((e,t)=>{var s;return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"MANUAL_RECEIVE"===e.transactionType||"PURCHASE_RECEIVE"===e.transactionType?(0,a.jsxs)("div",{className:"text-green-800 flex justify-center items-center",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 mr-1"}),"入庫"]}):"ORDER_REGIST"===e.transactionType?(0,a.jsxs)("div",{className:"text-blue-800 flex justify-center items-center",children:[(0,a.jsx)(i,{className:"w-5 h-5 mr-1"}),"発注登録"]}):"ITEM_REGIST"===e.transactionType?(0,a.jsxs)("div",{className:"text-blue-800 flex justify-center items-center",children:[(0,a.jsx)(i,{className:"w-5 h-5 mr-1"}),"在庫登録"]}):(0,a.jsxs)("div",{className:"text-red-800 flex justify-center items-center",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 mr-1"}),"出庫"]})}),(0,a.jsx)("td",{className:"px-4 py-2",children:(0,d.Y)(e.transactionTime)}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.stockItem.itemCode||"-"}),(0,a.jsx)("td",{className:"px-4 py-2 max-w-[300px] truncate whitespace-nowrap",title:null==(s=e.stockItem)?void 0:s.itemName,children:e.stockItem.itemName||"-"}),(0,a.jsx)("td",{className:"px-4 py-2",children:0===e.quantity?(0,a.jsx)("span",{className:"text-gray-500",children:e.quantity}):"ORDER_REGIST"===e.transactionType?(0,a.jsxs)("span",{className:"text-gray-500",children:["(",e.quantity,")"]}):"MANUAL_RECEIVE"===e.transactionType||"PURCHASE_RECEIVE"===e.transactionType?"+".concat(e.quantity):"-".concat(e.quantity)}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.operator}),(0,a.jsx)("td",{className:"px-4 py-2 max-w-[50px] truncate whitespace-nowrap",title:e.remarks,children:e.remarks||"-"}),(0,a.jsx)("td",{className:"px-4 py-2",children:"MANUAL_DISPATCH"===e.transactionType?(0,a.jsx)("span",{className:"text-gray-400",children:"ー"}):(0,a.jsx)(p(),{href:"#",onClick:()=>n(e),className:"text-[#0d113d]",children:(0,a.jsx)(o.A,{className:"mx-auto"})})})]},t)})})]}),s&&(0,a.jsx)(h,{transaction:s,onClose:()=>n(null)})]})}var y=s(6918),j=s(321),g=s(7924);function f(e){let{onSearch:t}=e,[s,n]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[c,o]=(0,r.useState)(""),[d,x]=(0,r.useState)("");return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("\uD83D\uDD0D フォーム送信時の検索条件",{itemCode:s,operator:l,fromDate:c,toDate:d}),t({itemCode:s||"",operator:l||"",fromDate:c||"",toDate:d||""})},className:"p-6 border-b mb-6 transition-all duration-300 ease-in-out animate-fade-in",style:{borderBottom:"1px solid #101540"},children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:s,onChange:e=>n(e.target.value),placeholder:"IDを入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"実行者を入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",value:c,onChange:e=>o(e.target.value),placeholder:"開始日を入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",value:d,onChange:e=>x(e.target.value),placeholder:"終了日を入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})})]}),(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsx)("button",{type:"submit",className:"text-black px-4 py-2 rounded shadow-md hover:opacity-90",style:{background:"linear-gradient(to bottom, #3D00B8, #3070C3)"},children:(0,a.jsx)(g.A,{className:"text-white",width:30,height:30})})})]})}var N=s(2596);function v(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),i=(0,y.z)(),[c,o]=(0,r.useState)(0),[d,h]=(0,r.useState)(0),[u,p]=(0,r.useState)(!1),[v,b]=(0,r.useState)({itemCode:"",operator:"",fromDate:"",toDate:""}),k=(0,r.useCallback)(async()=>{l(!0);try{await new Promise(e=>setTimeout(e,500));let e=await n.A.get("/transactions",{params:{...v}});console.log(e.data.data.content),t(e.data.data.content),h(e.data.data.totalPages)}catch(e){if(console.error("トランザクション取得エラー:",e),e.response&&e.response.data){let t=e.response.data;alert("エラーが発生しました！以下の内容を管理者に伝えてください。\n・error: ".concat(t.error,"\n・massage: ").concat(t.message,"\n・status: ").concat(t.status))}console.error("トランザクション取得エラー:",e)}finally{l(!1)}},[v,c]);return(0,r.useEffect)(()=>{i&&k()},[k,i]),(0,a.jsxs)("main",{className:"bg-white border-gray-400 shadow p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",style:{color:"#101540"},children:"入出庫処理一覧・検索"}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("button",{onClick:()=>p(e=>!e),className:"text-[#101540] hover:text-indigo-600 text-xl focus:outline-none transition-transform duration-300 ".concat(u?"rotate-180":"rotate-0"),"aria-label":"検索フォーム切り替え",children:u?(0,a.jsx)(x.A,{className:"text-[#0d113d]",width:30,height:30}):(0,a.jsx)(g.A,{className:"text-[#0d113d]",width:30,height:30})})})]}),(0,a.jsx)("div",{className:"\n            transition-all duration-500 ease-in-out overflow-hidden\n            ".concat(u?"max-h-[400px]":"max-h-0","\n          "),children:(0,a.jsx)(f,{onSearch:b})}),s?(0,a.jsx)(N.A,{}):(0,a.jsx)(m,{data:e}),(0,a.jsx)(j.A,{currentPage:c,totalPages:d,onPageChange:o})]})}},8174:(e,t,s)=>{Promise.resolve().then(s.bind(s,8016))},8804:(e,t,s)=>{"use strict";s.d(t,{Y:()=>a});let a=e=>{if(!e)return"";let t=new Date(e),s=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(r)}},9323:(e,t,s)=>{"use strict";s.d(t,{EN:()=>n,gf:()=>i,ri:()=>l});var a=s(1487),r=s(722);let n=async(e,t)=>{let s=await r.A.post("/login",{username:e,password:t});console.log("axios response:",s);let n=s.data.data.token,l=s.data.data.username;if(!n)throw Error("トークンが取得できませんでした");a.C.getState().setToken(n),a.C.getState().setAuthName(l)},l=()=>{a.C.getState().clearAuth()},i=()=>a.C.getState().token||localStorage.getItem("authToken")},9799:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(9946).A)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])},9946:(e,t,s)=>{"use strict";s.d(t,{A:()=>x});var a=s(2115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:x,iconNode:h,...u}=e;return(0,a.createElement)("svg",{ref:t,...o,width:r,height:r,stroke:s,strokeWidth:l?24*Number(n)/Number(r):n,className:i("lucide",d),...!x&&!c(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(x)?x:[x]])}),x=(e,t)=>{let s=(0,a.forwardRef)((s,n)=>{let{className:c,...o}=s;return(0,a.createElement)(d,{ref:n,iconNode:t,className:i("lucide-".concat(r(l(e))),"lucide-".concat(e),c),...o})});return s.displayName=l(e),s}}},e=>{var t=t=>e(e.s=t);e.O(0,[655,244,441,684,358],()=>t(8174)),_N_E=e.O()}]);