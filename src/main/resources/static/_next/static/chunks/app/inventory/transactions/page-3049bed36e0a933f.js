(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{1845:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(5155),n=t(2115),r=t(722),l=t(7039);let i=(0,t(9946).A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var c=t(9799),o=t(3786),d=t(8804),x=t(4416);function m(e){var s;let{transaction:t,onClose:n}=e,r=t.stockItem,l=t.purchaseOrder;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[#0d113d] opacity-40",onClick:n}),(0,a.jsxs)("div",{className:"relative z-10 bg-white w-full max-w-xl max-h-[70vh] py-10 px-6 rounded-lg shadow-lg overflow-y-auto space-y-4",children:[(0,a.jsx)("button",{onClick:n,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800",children:(0,a.jsx)(x.A,{size:24})}),(0,a.jsx)("h2",{className:"text-xl font-semibold",children:r.itemName}),(0,a.jsx)("h3",{className:"font-semibold",children:r.itemCode}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["カテゴリ / 型番・規格 ",(0,a.jsx)("br",{}),r.category," / ",r.modelNumber]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{children:["処理種別:","ORDER_REGIST"===t.transactionType?"発注登録":"MANUAL_DISPATCH"===t.transactionType?"出庫":"ITEM_REGIST"===t.transactionType?"在庫登録":"入庫"]}),(0,a.jsxs)("p",{children:["数量:","MANUAL_DISPATCH"===t.transactionType?"-".concat(t.quantity):"ORDER_REGIST"===t.transactionType||"ITEM_REGIST"===t.transactionType?"(".concat(t.quantity,")"):"+".concat(t.quantity)]}),(0,a.jsxs)("p",{children:["実行者: ",t.operator]}),(0,a.jsxs)("p",{children:["実行日: ",t.transactionTime.slice(0,10)]}),(0,a.jsxs)("p",{children:["備考: ",t.remarks||"-"]})]}),["PURCHASE_RECEIVE","ORDER_REGIST"].includes(t.transactionType)&&l&&(0,a.jsxs)("div",{className:"mt-4 border-t pt-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"発注情報"}),(0,a.jsxs)("p",{children:["発注番号: ",l.orderNo]}),(0,a.jsxs)("p",{children:["発注日: ",l.orderDate]}),(0,a.jsxs)("p",{children:["仕入先: ",l.supplier]}),(0,a.jsxs)("p",{children:["送料: ￥",l.shippingFee]}),(0,a.jsxs)("p",{children:["備考: ",l.remarks||"-"]}),(0,a.jsx)("p",{className:"font-medium mt-2",children:"明細:"}),(0,a.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-700",children:null==(s=l.details)?void 0:s.map((e,s)=>(0,a.jsxs)("li",{children:[e.itemCode," - ",e.itemName,"（￥",e.purchasePrice," \xd7 ",e.quantity,"）"]},s))})]})]})]})}var h=t(6874),p=t.n(h);function u(e){let{data:s}=e,[t,r]=(0,n.useState)(null);return(0,a.jsxs)("div",{className:"overflow-x-auto bg-white",children:[(0,a.jsxs)("table",{className:"w-full text-sm text-center border-collapse",children:[(0,a.jsx)("thead",{style:{color:"#101540"},children:(0,a.jsxs)("tr",{className:"font-semibold",children:[(0,a.jsx)("th",{className:"px-4 py-2",children:"種別"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"実行日"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"ID"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"品名"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"数量"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"実行者"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"備考"}),(0,a.jsx)("th",{className:"px-4 py-2",children:"詳細"})]})}),(0,a.jsx)("tbody",{className:"text-gray-700",children:s.map((e,s)=>{var t;return(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-4 py-2",children:"MANUAL_RECEIVE"===e.transactionType||"PURCHASE_RECEIVE"===e.transactionType?(0,a.jsxs)("div",{className:"text-green-800 flex justify-center items-center",children:[(0,a.jsx)(l.A,{className:"w-5 h-5 mr-1"}),"入庫"]}):"ORDER_REGIST"===e.transactionType?(0,a.jsxs)("div",{className:"text-blue-800 flex justify-center items-center",children:[(0,a.jsx)(i,{className:"w-5 h-5 mr-1"}),"発注登録"]}):"ITEM_REGIST"===e.transactionType?(0,a.jsxs)("div",{className:"text-blue-800 flex justify-center items-center",children:[(0,a.jsx)(i,{className:"w-5 h-5 mr-1"}),"在庫登録"]}):(0,a.jsxs)("div",{className:"text-red-800 flex justify-center items-center",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 mr-1"}),"出庫"]})}),(0,a.jsx)("td",{className:"px-4 py-2",children:(0,d.Y)(e.transactionTime)}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.stockItem.itemCode||"-"}),(0,a.jsx)("td",{className:"px-4 py-2 max-w-[300px] truncate whitespace-nowrap",title:null==(t=e.stockItem)?void 0:t.itemName,children:e.stockItem.itemName||"-"}),(0,a.jsx)("td",{className:"px-4 py-2",children:0===e.quantity?(0,a.jsx)("span",{className:"text-gray-500",children:e.quantity}):"ORDER_REGIST"===e.transactionType?(0,a.jsxs)("span",{className:"text-gray-500",children:["(",e.quantity,")"]}):"MANUAL_RECEIVE"===e.transactionType||"PURCHASE_RECEIVE"===e.transactionType?"+".concat(e.quantity):"-".concat(e.quantity)}),(0,a.jsx)("td",{className:"px-4 py-2",children:e.operator}),(0,a.jsx)("td",{className:"px-4 py-2 max-w-[50px] truncate whitespace-nowrap",title:e.remarks,children:e.remarks||"-"}),(0,a.jsx)("td",{className:"px-4 py-2",children:"MANUAL_DISPATCH"===e.transactionType?(0,a.jsx)("span",{className:"text-gray-400",children:"ー"}):(0,a.jsx)(p(),{href:"#",onClick:()=>r(e),className:"text-[#0d113d]",children:(0,a.jsx)(o.A,{className:"mx-auto"})})})]},s)})})]}),t&&(0,a.jsx)(m,{transaction:t,onClose:()=>r(null)})]})}var j=t(6918),y=t(321),N=t(7924);function g(e){let{onSearch:s}=e,[t,r]=(0,n.useState)(""),[l,i]=(0,n.useState)(""),[c,o]=(0,n.useState)(""),[d,x]=(0,n.useState)("");return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("\uD83D\uDD0D フォーム送信時の検索条件",{itemCode:t,operator:l,fromDate:c,toDate:d}),s({itemCode:t||"",operator:l||"",fromDate:c||"",toDate:d||""})},className:"p-6 border-b mb-6 transition-all duration-300 ease-in-out animate-fade-in",style:{borderBottom:"1px solid #101540"},children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),placeholder:"IDを入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"実行者を入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",value:c,onChange:e=>o(e.target.value),placeholder:"開始日を入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",value:d,onChange:e=>x(e.target.value),placeholder:"終了日を入力",className:"w-full px-3 py-2 text-[#0d113d] rounded focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-gray-100",style:{border:"1px solid #9F9F9F"}})})]}),(0,a.jsx)("div",{className:"flex justify-center mt-6",children:(0,a.jsx)("button",{type:"submit",className:"text-black px-4 py-2 rounded shadow-md hover:opacity-90",style:{background:"linear-gradient(to bottom, #3D00B8, #3070C3)"},children:(0,a.jsx)(N.A,{className:"text-white",width:30,height:30})})})]})}var f=t(2596);function b(){let[e,s]=(0,n.useState)([]),[t,l]=(0,n.useState)(!0),i=(0,j.z)(),[c,o]=(0,n.useState)(0),[d,m]=(0,n.useState)(0),[h,p]=(0,n.useState)(!1),[b,v]=(0,n.useState)({itemCode:"",operator:"",fromDate:"",toDate:""}),E=(0,n.useCallback)(async()=>{l(!0);try{await new Promise(e=>setTimeout(e,500));let e=await r.A.get("/transactions",{params:{...b,page:c}});console.log(e.data.data.content),s(e.data.data.content),m(e.data.data.totalPages)}catch(e){if(console.error("トランザクション取得エラー:",e),e.response&&e.response.data){let s=e.response.data;alert("エラーが発生しました！以下の内容を管理者に伝えてください。\n・error: ".concat(s.error,"\n・massage: ").concat(s.message,"\n・status: ").concat(s.status))}console.error("トランザクション取得エラー:",e)}finally{l(!1)}},[b,c]);return(0,n.useEffect)(()=>{i&&E()},[E,i]),(0,a.jsxs)("main",{className:"bg-white border-gray-400 shadow p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800",style:{color:"#101540"},children:"入出庫処理一覧・検索"}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsx)("button",{onClick:()=>p(e=>!e),className:"text-[#101540] hover:text-indigo-600 text-xl focus:outline-none transition-transform duration-300 ".concat(h?"rotate-180":"rotate-0"),"aria-label":"検索フォーム切り替え",children:h?(0,a.jsx)(x.A,{className:"text-[#0d113d]",width:30,height:30}):(0,a.jsx)(N.A,{className:"text-[#0d113d]",width:30,height:30})})})]}),(0,a.jsx)("div",{className:"\n            transition-all duration-500 ease-in-out overflow-hidden\n            ".concat(h?"max-h-[400px]":"max-h-0","\n          "),children:(0,a.jsx)(g,{onSearch:v})}),t?(0,a.jsx)(f.A,{}):(0,a.jsx)(u,{data:e}),(0,a.jsx)(y.A,{currentPage:c,totalPages:d,onPageChange:o})]})}},8174:(e,s,t)=>{Promise.resolve().then(t.bind(t,1845))}},e=>{var s=s=>e(e.s=s);e.O(0,[655,244,614,441,684,358],()=>s(8174)),_N_E=e.O()}]);