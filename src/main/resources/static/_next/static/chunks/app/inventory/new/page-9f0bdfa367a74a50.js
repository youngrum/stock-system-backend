(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[380],{722:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(3464),a=r(9323),n=r(1487);let o=s.A.create({baseURL:"http://localhost:8080/v1/api",headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=(0,a.gf)();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),o.interceptors.response.use(e=>e,e=>{var t,r;let s=null==(t=e.config.url)?void 0:t.endsWith("/login");if((null==(r=e.response)?void 0:r.status)===401&&!s){let{clearAuth:e}=n.C.getState();e(),window.location.href="/login"}return Promise.reject(e)});let l=o},1487:(e,t,r)=>{"use strict";r.d(t,{C:()=>n});var s=r(5453),a=r(6786);let n=(0,s.v)((0,a.Zr)(e=>({authName:null,token:null,setAuthName:t=>e({authName:t}),setToken:t=>e({token:t}),clearAuth:()=>e({authName:null,token:null})}),{name:"auth-storage",partialize:e=>({authName:e.authName,token:e.token})}))},2596:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);function a(){return(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-[#0d113d] opacity-70 z-50",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin w-16 h-16",viewBox:"0 0 50 50",children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"spinner-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"#3D00B8"}),(0,s.jsx)("stop",{offset:"100%",stopColor:"#3070C3"})]})}),(0,s.jsx)("circle",{cx:"25",cy:"25",r:"20",stroke:"url(#spinner-gradient)",strokeWidth:"6",fill:"none",strokeLinecap:"round"})]}),(0,s.jsx)("span",{className:"mt-4 text-lg font-semibold text-white drop-shadow",children:"ローディング中..."})]})})}},3793:(e,t,r)=>{Promise.resolve().then(r.bind(r,3935))},3935:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(5155),a=r(2115),n=r(5695),o=r(722),l=r(2596),c=r(6918);let i=["コネクタ","端子","チップジャック","プラグ","IC","フォトカプラ","コンデンサ","抵抗器","電圧計","コンバータ","レギュレータ","クリップ","LEDブラケット","DCジャック","カラーセンサ","ヒューズ","トランジスタ","ダイオード","圧電ブザー","シグナルフィルタ","位置センサー","ディストリビューター","マウントベース","ネジ・ナット類","リレー","電源","SPC ボタン","ガイドピンチップ","ボタン","セーフ","スペーサ","スイッチ","IECフィルタ","ACコード","モジュラープラグ","プラグブーツ","マーカーバンド","ソレノイド","トランジスタアレイ","ロジック","ポテンショメータ","インキ","カウンタ","ソケット","変圧器","バッファ","オプトカプラ","コンパレータ","LED","ドライバ","モジュール","アイソレータ","トランシーバ","抵抗アレイ","治具","タイマウント","フェライトコア","工具","プローブ用ソケット","NCC","スプリング","サーキットプロテクタ","ラインフィルター","発信器"];function u(){let e=(0,n.useRouter)(),t=(0,c.z)();(0,a.useEffect)(()=>{t||e.push("/login")},[t,e]);let[r,u]=(0,a.useState)({itemName:"",category:"",modelNumber:"",manufacturer:"",currentStock:0,location:"",remarks:""}),[d,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1),p=e=>{let{name:t,value:r}=e.target;u(e=>({...e,[t]:"currentStock"===t?parseInt(r)||0:r}))},g=async e=>{if(!window.confirm("本当にこの内容で登録しますか？\n品名：".concat(r.itemName,"\nカテゴリー：").concat(null==r?void 0:r.category,"\n仕入先: ").concat(r.modelNumber||"未入力","\nメーカー: ").concat(r.manufacturer||"不明","\n↓\n数量: ").concat(r.currentStock,"\n保管先: ").concat(r.location||"未入力","\n備考: ").concat(r.remarks||"未入力")))return void window.confirm("処理を取り消しました");e.preventDefault(),h(!0);try{let e={itemName:r.itemName,category:r.category,modelNumber:r.modelNumber||"-",manufacturer:r.manufacturer||"-",currentStock:r.currentStock||0,location:r.location||"-",remarks:r.remarks||"-"},t=await o.A.post("/inventory/new",e);console.log(t.data),m(t.data)}catch(e){if(console.error(e),e.response&&e.response.data){let t=e.response.data;alert("エラーが発生しました！以下の内容を管理者に伝えてください。\n・error: ".concat(t.error,"\n・massage: ").concat(t.message,"\n・status: ").concat(t.status))}}finally{h(!1)}};return(0,s.jsxs)(s.Fragment,{children:[x&&(0,s.jsx)(l.A,{}),(0,s.jsxs)("div",{className:"max-w-xl mx-auto bg-white border-gray-400 shadow p-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"新規在庫登録"}),(0,s.jsx)("div",{className:"border rounded p-2 hover:bg-[#1d1f3c] hover:text-gray-200",children:(0,s.jsx)("button",{className:"text-xl",onClick:()=>e.push("/csv"),children:"import with csv"})})]}),(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"itemName",className:"block mb-1 font-medium",children:"品名 *"}),(0,s.jsx)("input",{type:"text",name:"itemName",value:r.itemName,onChange:p,required:!0,className:"w-full bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none px-3 py-2",style:{border:"1px solid #9F9F9F"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"category",className:"block mb-1 font-medium",children:"カテゴリ *"}),(0,s.jsxs)("select",{name:"category",id:"category",value:r.category,onChange:p,required:!0,className:"w-full bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none px-3 py-2",style:{border:"1px solid #9F9F9F"},children:[(0,s.jsx)("option",{value:"",children:"-- カテゴリを選択してください --"})," ",i.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"modelNumber",className:"block mb-1 font-medium",children:"型番・規格"}),(0,s.jsx)("input",{type:"text",name:"modelNumber",value:r.modelNumber,onChange:p,className:"w-full bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none px-3 py-2",style:{border:"1px solid #9F9F9F"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"manufacturer",className:"block mb-1 font-medium",children:"メーカー"}),(0,s.jsx)("input",{type:"text",name:"manufacturer",value:r.manufacturer,onChange:p,className:"w-full bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none px-3 py-2",style:{border:"1px solid #9F9F9F"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"currentStock",className:"block mb-1 font-medium",children:["在庫数 * ",(0,s.jsx)("span",{className:"text-sm",children:"(ID発行のみなら、0でOK)"})]}),(0,s.jsx)("input",{type:"number",name:"currentStock",value:r.currentStock,min:0,onChange:p,placeholder:"例: 10",required:!0,className:"w-full bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none px-3 py-2",style:{border:"1px solid #9F9F9F"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"location",className:"block mb-1 font-medium",children:"保管先"}),(0,s.jsx)("input",{type:"text",name:"location",value:r.location,onChange:p,className:"w-full bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none px-3 py-2",placeholder:"例: 棚 上から3段目の左側の箱",style:{border:"1px solid #9F9F9F"}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"remarks",className:"block mb-1 font-medium",children:"備考"}),(0,s.jsx)("textarea",{name:"remarks",value:r.remarks,onChange:p,className:"w-full bg-gray-50 text-gray-900 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none px-3 py-2",style:{border:"1px solid #9F9F9F"}})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>e.push("/inventory"),className:"px-4 py-2 rounded bg-gray-100 hover:bg-gray-200",children:"キャンセル"}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"px-4 py-2 rounded text-white hover:opacity-80 disabled:opacity-50",style:{background:"linear-gradient(to bottom, #3D00B8, #3070C3)"},children:x?"登録中...":"在庫を登録する"})]})]})]}),d&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30",children:(0,s.jsxs)("p",{className:"bg-white shadoow p-5 rounded",children:[(0,s.jsx)("p",{children:"登録に成功しました。"}),(0,s.jsxs)("p",{className:"mb-5",children:["在庫ID: ",d.data.itemCode]}),(0,s.jsx)("button",{className:"px-4 py-1 rounded bg-blue-600 text-white mr-2",onClick:()=>{m(null),u({itemName:"",category:"",modelNumber:"",manufacturer:"",currentStock:0,location:"",remarks:""})},children:"続けて登録"}),(0,s.jsx)("button",{className:"px-4 py-1 rounded bg-blue-600 text-white",onClick:()=>e.push("/inventory"),children:"在庫検索に戻る"})]})})]})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},6918:(e,t,r)=>{"use strict";r.d(t,{z:()=>o});var s=r(2115),a=r(5695),n=r(1487);let o=()=>{var e;let t=(0,a.useRouter)(),r=(0,n.C)(e=>e.token),o=(0,n.C)(e=>e.authName),l=null!=(e=n.C.persist)&&!!e.hasHydrated&&n.C.persist.hasHydrated(),c=!!r&&!!o;return(0,s.useEffect)(()=>{l&&(c||t.replace("/login"))},[c,l,t]),l&&c}},9323:(e,t,r)=>{"use strict";r.d(t,{EN:()=>n,gf:()=>l,ri:()=>o});var s=r(1487),a=r(722);let n=async(e,t)=>{let r=await a.A.post("/login",{username:e,password:t});console.log("axios response:",r);let n=r.data.data.token,o=r.data.data.username;if(!n)throw Error("トークンが取得できませんでした");s.C.getState().setToken(n),s.C.getState().setAuthName(o)},o=()=>{s.C.getState().clearAuth()},l=()=>s.C.getState().token||localStorage.getItem("authToken")}},e=>{var t=t=>e(e.s=t);e.O(0,[655,441,684,358],()=>t(3793)),_N_E=e.O()}]);